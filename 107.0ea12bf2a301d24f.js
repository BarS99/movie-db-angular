"use strict";(self.webpackChunkmovie_db=self.webpackChunkmovie_db||[]).push([[107],{7107:(G,T,r)=>{r.r(T),r.d(T,{CardViewModule:()=>H});var l=r(9808),g=r(9560),s=r(801),V=r(7957),v=r(2340),e=r(1223),F=r(4825),y=r(520);let M=(()=>{class t{constructor(i){this.http=i}getMovie(i){return this.http.get(`${v.V0.url}/3/movie/${i}?api_key=${v.V0.key}`).pipe((0,F.g)(300))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(y.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=r(7933),Z=r(9444);let U=(()=>{class t{constructor(){this.rating=0}ngOnInit(){}get Rating(){return Math.floor(this.rating)/10*100+"%"}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-rating"]],inputs:{rating:"rating"},decls:4,vars:3,consts:[[1,"progress","position-relative","mb-4"],[1,"progress-bar","progress-bar-striped"],[1,"position-absolute","top-0","end-0","bottom-0","start-0","text-center","d-flex","align-items-center","justify-content-center","fw-bold","p-1"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA()()()),2&i&&(e.xp6(1),e.Udp("width",n.Rating),e.xp6(2),e.hij(" Community rating: ",n.Rating," "))},styles:[".progress[_ngcontent-%COMP%]{height:2rem;text-shadow:2px 2px 2px rgba(0,0,0,.4)}.progress-bar[_ngcontent-%COMP%]{height:inherit}"]}),t})();var I=r(8844),Y=r(605);function A(t,o){if(1&t&&e._UZ(0,"img",21),2&t){const i=e.oxw(2);e.s9C("src",i.PosterPath,e.LSH),e.Q6J("alt","Poster of "+i.movie.title)}}function N(t,o){if(1&t&&e._UZ(0,"img",21),2&t){const i=e.oxw(2);e.s9C("src",i.Thumbnail,e.LSH),e.Q6J("alt","Poster of "+i.movie.title)}}function Q(t,o){if(1&t&&(e.TgZ(0,"time",22),e._UZ(1,"fa-icon",23),e._uU(2),e.qZA()),2&t){const i=e.oxw(2);e.uIk("datetime",i.getDateToIso(i.movie.release_date)),e.xp6(2),e.hij(" ",i.movie.release_date," ")}}function P(t,o){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"fa-icon",24),e._uU(2," Add to favorite "),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("icon",i.starIcon)}}function S(t,o){if(1&t&&(e._UZ(0,"fa-icon",24),e._uU(1," Remove from favorite ")),2&t){const i=e.oxw(2);e.Q6J("icon",i.banIcon)}}function j(t,o){if(1&t&&e._UZ(0,"app-rating",25),2&t){const i=e.oxw(2);e.Q6J("rating",i.movie.vote_average)}}function O(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"th",28),e._UZ(2,"fa-icon",29),e._uU(3),e.qZA(),e.TgZ(4,"td",30),e._uU(5),e.qZA()()),2&t){const i=o.$implicit;e.xp6(2),e.Q6J("icon",i.icon),e.xp6(1),e.hij(" ",i.field," "),e.xp6(2),e.hij(" ",i.value," ")}}function R(t,o){if(1&t&&(e.TgZ(0,"table",26)(1,"tbody"),e.YNc(2,O,6,3,"tr",27),e.qZA()()),2&t){const i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.DetailsList)}}function k(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e.YNc(4,A,1,2,"img",8),e.YNc(5,N,1,2,"ng-template",null,9,e.W1O),e.qZA()(),e.TgZ(7,"div",10)(8,"div",11)(9,"div",12),e.YNc(10,Q,3,2,"time",13),e.TgZ(11,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw().toggleFavorite()}),e.YNc(12,P,3,1,"div",15),e.YNc(13,S,2,1,"ng-template",null,16,e.W1O),e.qZA()(),e.TgZ(15,"h1",17),e._uU(16),e.qZA(),e.TgZ(17,"div"),e.YNc(18,j,1,1,"app-rating",18),e.TgZ(19,"p",19),e._uU(20),e.qZA(),e.YNc(21,R,3,1,"table",20),e.qZA()()()()()}if(2&t){const i=e.MAs(6),n=e.MAs(14),a=e.oxw();e.xp6(4),e.Q6J("ngIf",null!==a.PosterPath)("ngIfElse",i),e.xp6(6),e.Q6J("ngIf",a.movie.release_date),e.xp6(1),e.Q6J("ngClass",a.isFavorite?"btn-danger":"btn-success"),e.xp6(1),e.Q6J("ngIf",!a.isFavorite)("ngIfElse",n),e.xp6(4),e.hij(" ",a.movie.title," "),e.xp6(2),e.Q6J("ngIf",a.movie.vote_average),e.xp6(2),e.hij(" ",a.movie.overview," "),e.xp6(1),e.Q6J("ngIf",a.DetailsList.length)}}function $(t,o){if(1&t&&(e.TgZ(0,"div",31)(1,"ngb-alert",32),e._uU(2),e.qZA()()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("dismissible",!1),e.xp6(1),e.hij(" ",i.alertMessage," ")}}function B(t,o){1&t&&e._UZ(0,"app-loader")}function L(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){return e.CHM(i),e.oxw().goBack()}),e._uU(2," Back to list "),e.qZA()()}}const E=[{path:"",component:(()=>{class t{constructor(i,n,a,d){this.route=i,this.cardViewService=n,this.favoriteService=a,this.locationService=d,this.id=-1,this.movie=null,this.isFavorite=!1,this.alertMessage="",this.loading=!0,this.starIcon=s.Tab,this.banIcon=s.gPx}ngOnInit(){this.route.params.subscribe(i=>{this.id=parseInt(i.id)}),this.isFavorite=this.favoriteService.isFavorite(this.id),this.cardViewService.getMovie(this.id).subscribe({next:i=>{this.movie=i},error:()=>{this.alertMessage="Failed to fetch the movie!",this.loading=!1},complete:()=>{this.loading=!1}})}get PosterPath(){var i,n,a;return null===(null===(i=this.movie)||void 0===i?void 0:i.poster_path)||!0===(null===(n=this.movie)||void 0===n?void 0:n.adult)?null:`${v.V0.posterLg}${null===(a=this.movie)||void 0===a?void 0:a.poster_path}`}get Thumbnail(){return`${v.Ll}/images/thumbnail.jpg`}get DetailsList(){var i,n,a,d,m,p,u,f,h,_,x,C,w,b;const c=[];return null!==(null===(i=this.movie)||void 0===i?void 0:i.genres)&&void 0!==(null===(n=this.movie)||void 0===n?void 0:n.genres)&&(null===(a=this.movie)||void 0===a?void 0:a.genres.length)&&c.push({icon:s.Psp,field:"Genres",value:null===(d=this.movie)||void 0===d?void 0:d.genres.map(W=>W.name).join(", ")}),null!==(null===(m=this.movie)||void 0===m?void 0:m.revenue)&&void 0!==(null===(p=this.movie)||void 0===p?void 0:p.revenue)&&c.push({icon:s.n7u,field:"Box office",value:`${null===(u=this.movie)||void 0===u?void 0:u.revenue.toLocaleString()}$`}),null!==(null===(f=this.movie)||void 0===f?void 0:f.adult)&&void 0!==(null===(h=this.movie)||void 0===h?void 0:h.adult)&&c.push({icon:s.caW,field:"For adults",value:(null===(_=this.movie)||void 0===_?void 0:_.adult)?"Yes":"No"}),null!==(null===(x=this.movie)||void 0===x?void 0:x.homepage)&&void 0!==(null===(C=this.movie)||void 0===C?void 0:C.homepage)&&(null===(w=this.movie)||void 0===w?void 0:w.homepage.length)&&c.push({icon:s.nNP,field:"Website",value:null===(b=this.movie)||void 0===b?void 0:b.homepage}),c}getDateToIso(i){return(0,V.h)(i)}toggleFavorite(){this.isFavorite?(this.favoriteService.removeFromFavorite(this.id),this.isFavorite=!1):(this.favoriteService.addToFavorite(this.id),this.isFavorite=!0)}goBack(){this.locationService.back()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(g.gz),e.Y36(M),e.Y36(J.e),e.Y36(l.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-card-view"]],decls:4,vars:4,consts:[["class","container card-view",4,"ngIf"],["class","container",4,"ngIf"],[4,"ngIf"],["class","text-center py-2",4,"ngIf"],[1,"container","card-view"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card-view__image"],["class","img-fluid",3,"src","alt",4,"ngIf","ngIfElse"],["thumbnail",""],[1,"col-lg-6"],[1,"row","gap-4"],[1,"d-flex","flex-column","flex-sm-row","align-items-center","mb-2","gap-2","gap-sm-4"],["class","d-block",4,"ngIf"],[1,"btn","btn-sm",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["removeFavorite",""],[1,"h2","fw-bold"],[3,"rating",4,"ngIf"],[1,"lh-base","fs-5"],["class","table table-light table-striped card-view__details mt-4",4,"ngIf"],[1,"img-fluid",3,"src","alt"],[1,"d-block"],["icon","calendar",1,"me-2"],[1,"me-2",3,"icon"],[3,"rating"],[1,"table","table-light","table-striped","card-view__details","mt-4"],[4,"ngFor","ngForOf"],[1,"card-view__details-field"],[1,"card-view__details-icon",3,"icon"],[1,"card-view__details-value"],[1,"container"],["type","info",3,"dismissible"],[1,"text-center","py-2"],[1,"btn","btn-secondary",3,"click"]],template:function(i,n){1&i&&(e.YNc(0,k,22,10,"div",0),e.YNc(1,$,3,2,"div",1),e.YNc(2,B,1,0,"app-loader",2),e.YNc(3,L,3,0,"div",3)),2&i&&(e.Q6J("ngIf",null!==n.movie),e.xp6(1),e.Q6J("ngIf",n.alertMessage),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading&&!n.alertMessage))},directives:[l.O5,Z.BN,l.mk,U,l.sg,I.xm,Y.R],styles:[".card-view__image[_ngcontent-%COMP%]{max-width:400px;margin-left:auto;margin-right:auto;display:block}.card-view__details-field[_ngcontent-%COMP%]{white-space:nowrap;vertical-align:middle}.card-view__details-value[_ngcontent-%COMP%]{word-break:break-word}.card-view__details-icon[_ngcontent-%COMP%]{width:2.5rem;display:inline-flex;justify-content:center}"]}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.Bz.forChild(E)],g.Bz]}),t})();var D=r(4466);let H=(()=>{class t{constructor(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,z,Z.uH,D.m,I.IJ]]}),t})()}}]);