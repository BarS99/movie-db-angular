"use strict";(self.webpackChunkmovie_db=self.webpackChunkmovie_db||[]).push([[107],{7107:(W,Z,a)=>{a.r(Z),a.d(Z,{CardViewModule:()=>E});var l=a(9808),g=a(9560),s=a(801),I=a(7957),v=a(2340),e=a(1223),F=a(4825),y=a(520);let M=(()=>{class t{constructor(i){this.http=i}getMovie(i){return this.http.get(`${v.V0.url}/3/movie/${i}?api_key=${v.V0.key}`).pipe((0,F.g)(300))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(y.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=a(7933),T=a(9444);let U=(()=>{class t{constructor(){this.rating=0}ngOnInit(){}get Rating(){return Math.floor(this.rating)/10*100+"%"}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-rating"]],inputs:{rating:"rating"},decls:4,vars:3,consts:[[1,"progress","position-relative","mb-4"],[1,"progress-bar","progress-bar-striped"],[1,"position-absolute","top-0","end-0","bottom-0","start-0","text-center","d-flex","align-items-center","justify-content-center","fw-bold","p-1"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA()()()),2&i&&(e.xp6(1),e.Udp("width",o.Rating),e.xp6(2),e.hij(" Community rating: ",o.Rating," "))},styles:[".progress[_ngcontent-%COMP%]{height:2rem;text-shadow:2px 2px 2px rgba(0,0,0,.4)}.progress-bar[_ngcontent-%COMP%]{height:inherit}"]}),t})();var V=a(8844),Y=a(605);function A(t,n){if(1&t&&e._UZ(0,"img",20),2&t){const i=e.oxw(2);e.s9C("src",i.PosterPath,e.LSH),e.Q6J("alt","Poster of "+i.movie.title)}}function N(t,n){if(1&t&&(e.TgZ(0,"time",21),e._UZ(1,"fa-icon",22),e._uU(2),e.qZA()),2&t){const i=e.oxw(2);e.uIk("datetime",i.getDateToIso(i.movie.release_date)),e.xp6(2),e.hij(" ",i.movie.release_date," ")}}function Q(t,n){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"fa-icon",23),e._uU(2," Add to favorite "),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("icon",i.starIcon)}}function P(t,n){if(1&t&&(e._UZ(0,"fa-icon",23),e._uU(1," Remove from favorite ")),2&t){const i=e.oxw(2);e.Q6J("icon",i.banIcon)}}function S(t,n){if(1&t&&e._UZ(0,"app-rating",24),2&t){const i=e.oxw(2);e.Q6J("rating",i.movie.vote_average)}}function j(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"th",27),e._UZ(2,"fa-icon",28),e._uU(3),e.qZA(),e.TgZ(4,"td",29),e._uU(5),e.qZA()()),2&t){const i=n.$implicit;e.xp6(2),e.Q6J("icon",i.icon),e.xp6(1),e.hij(" ",i.field," "),e.xp6(2),e.hij(" ",i.value," ")}}function O(t,n){if(1&t&&(e.TgZ(0,"table",25)(1,"tbody"),e.YNc(2,j,6,3,"tr",26),e.qZA()()),2&t){const i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.DetailsList)}}function R(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e.YNc(4,A,1,2,"img",8),e.qZA()(),e.TgZ(5,"div",9)(6,"div",10)(7,"div",11),e.YNc(8,N,3,2,"time",12),e.TgZ(9,"button",13),e.NdJ("click",function(){return e.CHM(i),e.oxw().toggleFavorite()}),e.YNc(10,Q,3,1,"div",14),e.YNc(11,P,2,1,"ng-template",null,15,e.W1O),e.qZA()(),e.TgZ(13,"h1",16),e._uU(14),e.qZA(),e.TgZ(15,"div"),e.YNc(16,S,1,1,"app-rating",17),e.TgZ(17,"p",18),e._uU(18),e.qZA(),e.YNc(19,O,3,1,"table",19),e.qZA()()()()()}if(2&t){const i=e.MAs(12),o=e.oxw();e.xp6(4),e.Q6J("ngIf",null!==o.PosterPath),e.xp6(4),e.Q6J("ngIf",o.movie.release_date),e.xp6(1),e.Q6J("ngClass",o.isFavorite?"btn-danger":"btn-success"),e.xp6(1),e.Q6J("ngIf",!o.isFavorite)("ngIfElse",i),e.xp6(4),e.hij(" ",o.movie.title," "),e.xp6(2),e.Q6J("ngIf",o.movie.vote_average),e.xp6(2),e.hij(" ",o.movie.overview," "),e.xp6(1),e.Q6J("ngIf",o.DetailsList.length)}}function k(t,n){if(1&t&&(e.TgZ(0,"div",30)(1,"ngb-alert",31),e._uU(2),e.qZA()()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("dismissible",!1),e.xp6(1),e.hij(" ",i.alertMessage," ")}}function $(t,n){1&t&&e._UZ(0,"app-loader")}function B(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",32)(1,"button",33),e.NdJ("click",function(){return e.CHM(i),e.oxw().goBack()}),e._uU(2," Back to list "),e.qZA()()}}const L=[{path:"",component:(()=>{class t{constructor(i,o,r,d){this.route=i,this.cardViewService=o,this.favoriteService=r,this.locationService=d,this.id=-1,this.movie=null,this.isFavorite=!1,this.alertMessage="",this.loading=!0,this.starIcon=s.Tab,this.banIcon=s.gPx}ngOnInit(){this.route.params.subscribe(i=>{this.id=parseInt(i.id)}),this.isFavorite=this.favoriteService.isFavorite(this.id),this.cardViewService.getMovie(this.id).subscribe({next:i=>{this.movie=i},error:()=>{this.alertMessage="Failed to fetch the movie!",this.loading=!1},complete:()=>{this.loading=!1}})}get PosterPath(){var i,o,r;return null===(null===(i=this.movie)||void 0===i?void 0:i.poster_path)||!0===(null===(o=this.movie)||void 0===o?void 0:o.adult)?`${v.Ll}/images/thumbnail.jpg`:`${v.V0.posterLg}${null===(r=this.movie)||void 0===r?void 0:r.poster_path}`}get DetailsList(){var i,o,r,d,m,p,u,f,h,_,x,C,w,b;const c=[];return null!==(null===(i=this.movie)||void 0===i?void 0:i.genres)&&void 0!==(null===(o=this.movie)||void 0===o?void 0:o.genres)&&(null===(r=this.movie)||void 0===r?void 0:r.genres.length)&&c.push({icon:s.Psp,field:"Genres",value:null===(d=this.movie)||void 0===d?void 0:d.genres.map(H=>H.name).join(", ")}),null!==(null===(m=this.movie)||void 0===m?void 0:m.revenue)&&void 0!==(null===(p=this.movie)||void 0===p?void 0:p.revenue)&&c.push({icon:s.n7u,field:"Box office",value:`${null===(u=this.movie)||void 0===u?void 0:u.revenue.toLocaleString()}$`}),null!==(null===(f=this.movie)||void 0===f?void 0:f.adult)&&void 0!==(null===(h=this.movie)||void 0===h?void 0:h.adult)&&c.push({icon:s.caW,field:"For adults",value:(null===(_=this.movie)||void 0===_?void 0:_.adult)?"Yes":"No"}),null!==(null===(x=this.movie)||void 0===x?void 0:x.homepage)&&void 0!==(null===(C=this.movie)||void 0===C?void 0:C.homepage)&&(null===(w=this.movie)||void 0===w?void 0:w.homepage.length)&&c.push({icon:s.nNP,field:"Website",value:null===(b=this.movie)||void 0===b?void 0:b.homepage}),c}getDateToIso(i){return(0,I.h)(i)}toggleFavorite(){this.isFavorite?(this.favoriteService.removeFromFavorite(this.id),this.isFavorite=!1):(this.favoriteService.addToFavorite(this.id),this.isFavorite=!0)}goBack(){this.locationService.back()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(g.gz),e.Y36(M),e.Y36(J.e),e.Y36(l.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-card-view"]],decls:4,vars:4,consts:[["class","container card-view",4,"ngIf"],["class","container",4,"ngIf"],[4,"ngIf"],["class","text-center py-2",4,"ngIf"],[1,"container","card-view"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card-view__image"],["class","img-fluid",3,"src","alt",4,"ngIf"],[1,"col-lg-6"],[1,"row","gap-4"],[1,"d-flex","flex-column","flex-sm-row","align-items-center","mb-2","gap-2","gap-sm-4"],["class","d-block",4,"ngIf"],[1,"btn","btn-sm",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["removeFavorite",""],[1,"h2","fw-bold"],[3,"rating",4,"ngIf"],[1,"lh-base","fs-5"],["class","table table-light table-striped card-view__details mt-4",4,"ngIf"],[1,"img-fluid",3,"src","alt"],[1,"d-block"],["icon","calendar",1,"me-2"],[1,"me-2",3,"icon"],[3,"rating"],[1,"table","table-light","table-striped","card-view__details","mt-4"],[4,"ngFor","ngForOf"],[1,"card-view__details-field"],[1,"card-view__details-icon",3,"icon"],[1,"card-view__details-value"],[1,"container"],["type","info",3,"dismissible"],[1,"text-center","py-2"],[1,"btn","btn-secondary",3,"click"]],template:function(i,o){1&i&&(e.YNc(0,R,20,9,"div",0),e.YNc(1,k,3,2,"div",1),e.YNc(2,$,1,0,"app-loader",2),e.YNc(3,B,3,0,"div",3)),2&i&&(e.Q6J("ngIf",null!==o.movie),e.xp6(1),e.Q6J("ngIf",o.alertMessage),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading&&!o.alertMessage))},directives:[l.O5,T.BN,l.mk,U,l.sg,V.xm,Y.R],styles:[".card-view__image[_ngcontent-%COMP%]{max-width:400px;margin-left:auto;margin-right:auto;display:block}.card-view__details-field[_ngcontent-%COMP%]{white-space:nowrap;vertical-align:middle}.card-view__details-value[_ngcontent-%COMP%]{word-break:break-word}.card-view__details-icon[_ngcontent-%COMP%]{width:2.5rem;display:inline-flex;justify-content:center}"]}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.Bz.forChild(L)],g.Bz]}),t})();var D=a(4466);let E=(()=>{class t{constructor(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,z,T.uH,D.m,V.IJ]]}),t})()}}]);