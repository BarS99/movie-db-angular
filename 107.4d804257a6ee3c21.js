"use strict";(self.webpackChunkmovie_db=self.webpackChunkmovie_db||[]).push([[107],{7107:(L,w,a)=>{a.r(w),a.d(w,{CardViewModule:()=>B});var l=a(9808),v=a(9560),s=a(801),V=a(7957),g=a(2340),e=a(1223),T=a(4825),F=a(520);let I=(()=>{class t{constructor(i){this.http=i}getMovie(i){return this.http.get(`${g.V.url}/3/movie/${i}?api_key=${g.V.key}`).pipe((0,T.g)(300))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(F.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var y=a(7933),b=a(9444);let M=(()=>{class t{constructor(){this.rating=0}ngOnInit(){}get Rating(){return this.rating/10*100+"%"}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-rating"]],inputs:{rating:"rating"},decls:4,vars:3,consts:[[1,"progress","position-relative","mb-4"],[1,"progress-bar","progress-bar-striped"],[1,"position-absolute","top-0","end-0","bottom-0","start-0","text-center","d-flex","align-items-center","justify-content-center","fw-bold","p-1"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA()()()),2&i&&(e.xp6(1),e.Udp("width",o.Rating),e.xp6(2),e.hij(" Community rating: ",o.Rating," "))},styles:[".progress[_ngcontent-%COMP%]{height:2rem;text-shadow:2px 2px 2px rgba(0,0,0,.4)}.progress-bar[_ngcontent-%COMP%]{height:inherit}"]}),t})();var Z=a(8955),J=a(605);function U(t,n){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"fa-icon",21),e._uU(2," Add to favorite "),e.qZA()),2&t){const i=e.oxw(2);e.xp6(1),e.Q6J("icon",i.starIcon)}}function A(t,n){if(1&t&&(e._UZ(0,"fa-icon",21),e._uU(1," Remove from favorite ")),2&t){const i=e.oxw(2);e.Q6J("icon",i.banIcon)}}function S(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"th",24),e._UZ(2,"fa-icon",25),e._uU(3),e.qZA(),e.TgZ(4,"td",26),e._uU(5),e.qZA()()),2&t){const i=n.$implicit;e.xp6(2),e.Q6J("icon",i.icon),e.xp6(1),e.hij(" ",i.field," "),e.xp6(2),e.hij(" ",i.value," ")}}function Y(t,n){if(1&t&&(e.TgZ(0,"table",22)(1,"tbody"),e.YNc(2,S,6,3,"tr",23),e.qZA()()),2&t){const i=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",i.DetailsList)}}function N(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e._UZ(4,"img",8),e.qZA()(),e.TgZ(5,"div",9)(6,"div",10)(7,"div",11)(8,"time",12),e._UZ(9,"fa-icon",13),e._uU(10),e.qZA(),e.TgZ(11,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw().toggleFavorite()}),e.YNc(12,U,3,1,"div",15),e.YNc(13,A,2,1,"ng-template",null,16,e.W1O),e.qZA()(),e.TgZ(15,"h1",17),e._uU(16),e.qZA(),e.TgZ(17,"div"),e._UZ(18,"app-rating",18),e.TgZ(19,"p",19),e._uU(20),e.qZA(),e.YNc(21,Y,3,1,"table",20),e.qZA()()()()()}if(2&t){const i=e.MAs(14),o=e.oxw();e.xp6(4),e.s9C("src",o.PosterPath,e.LSH),e.Q6J("alt","Poster of "+o.movie.title),e.xp6(4),e.uIk("datetime",o.getDateToIso(o.movie.release_date)),e.xp6(2),e.hij(" ",o.movie.release_date," "),e.xp6(1),e.Q6J("ngClass",o.isFavorite?"btn-danger":"btn-success"),e.xp6(1),e.Q6J("ngIf",!o.isFavorite)("ngIfElse",i),e.xp6(4),e.hij(" ",o.movie.title," "),e.xp6(2),e.Q6J("rating",o.movie.vote_average),e.xp6(2),e.hij(" ",o.movie.overview," "),e.xp6(1),e.Q6J("ngIf",o.DetailsList.length)}}function P(t,n){if(1&t&&(e.TgZ(0,"div",27)(1,"ngb-alert",28),e._uU(2),e.qZA()()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("dismissible",!1),e.xp6(1),e.hij(" ",i.alertMessage," ")}}function Q(t,n){1&t&&e._UZ(0,"app-loader")}function j(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",29)(1,"button",30),e.NdJ("click",function(){return e.CHM(i),e.oxw().goBack()}),e._uU(2," Back to list "),e.qZA()()}}const O=[{path:"",component:(()=>{class t{constructor(i,o,r,d){this.route=i,this.cardViewService=o,this.favoriteService=r,this.locationService=d,this.id=-1,this.movie=null,this.isFavorite=!1,this.alertMessage="",this.loading=!0,this.starIcon=s.Tab,this.banIcon=s.gPx}ngOnInit(){this.route.params.subscribe(i=>{this.id=parseInt(i.id)}),this.isFavorite=this.favoriteService.isFavorite(this.id),this.cardViewService.getMovie(this.id).subscribe({next:i=>{this.movie=i},error:()=>{this.alertMessage="Failed to fetch the movie!",this.loading=!1},complete:()=>{this.loading=!1}})}get PosterPath(){var i;return`${g.V.posterLg}${null===(i=this.movie)||void 0===i?void 0:i.poster_path}`}get DetailsList(){var i,o,r,d,m,p,u,f,h,_,C,x;const c=[];return null!==(null===(i=this.movie)||void 0===i?void 0:i.genres)&&void 0!==(null===(o=this.movie)||void 0===o?void 0:o.genres)&&c.push({icon:s.Psp,field:"Genres",value:null===(r=this.movie)||void 0===r?void 0:r.genres.map($=>$.name).join(", ")}),null!==(null===(d=this.movie)||void 0===d?void 0:d.revenue)&&void 0!==(null===(m=this.movie)||void 0===m?void 0:m.revenue)&&c.push({icon:s.n7u,field:"Box office",value:`${null===(p=this.movie)||void 0===p?void 0:p.revenue.toLocaleString()}$`}),null!==(null===(u=this.movie)||void 0===u?void 0:u.adult)&&void 0!==(null===(f=this.movie)||void 0===f?void 0:f.adult)&&c.push({icon:s.caW,field:"For adults",value:(null===(h=this.movie)||void 0===h?void 0:h.adult)?"Yes":"No"}),null!==(null===(_=this.movie)||void 0===_?void 0:_.homepage)&&void 0!==(null===(C=this.movie)||void 0===C?void 0:C.homepage)&&c.push({icon:s.nNP,field:"Website",value:null===(x=this.movie)||void 0===x?void 0:x.homepage}),c}getDateToIso(i){return(0,V.h)(i)}toggleFavorite(){this.isFavorite?(this.favoriteService.removeFromFavorite(this.id),this.isFavorite=!1):(this.favoriteService.addToFavorite(this.id),this.isFavorite=!0)}goBack(){this.locationService.back()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(v.gz),e.Y36(I),e.Y36(y.e),e.Y36(l.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-card-view"]],decls:4,vars:4,consts:[["class","container card-view",4,"ngIf"],["class","container",4,"ngIf"],[4,"ngIf"],["class","text-center py-2",4,"ngIf"],[1,"container","card-view"],[1,"row"],[1,"col-lg-6","mb-4"],[1,"card-view__image"],[1,"img-fluid",3,"src","alt"],[1,"col-lg-6"],[1,"row","gap-4"],[1,"d-flex","flex-column","flex-sm-row","align-items-center","mb-2","gap-2","gap-sm-4"],[1,"d-block"],["icon","calendar",1,"me-2"],[1,"btn","btn-sm",3,"ngClass","click"],[4,"ngIf","ngIfElse"],["removeFavorite",""],[1,"h2","fw-bold"],[3,"rating"],[1,"lh-base","fs-5"],["class","table table-light table-striped card-view__details mt-4",4,"ngIf"],[1,"me-2",3,"icon"],[1,"table","table-light","table-striped","card-view__details","mt-4"],[4,"ngFor","ngForOf"],[1,"card-view__details-field"],[1,"card-view__details-icon",3,"icon"],[1,"card-view__details-value"],[1,"container"],["type","info",3,"dismissible"],[1,"text-center","py-2"],[1,"btn","btn-secondary",3,"click"]],template:function(i,o){1&i&&(e.YNc(0,N,22,11,"div",0),e.YNc(1,P,3,2,"div",1),e.YNc(2,Q,1,0,"app-loader",2),e.YNc(3,j,3,0,"div",3)),2&i&&(e.Q6J("ngIf",null!==o.movie),e.xp6(1),e.Q6J("ngIf",o.alertMessage),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading&&!o.alertMessage))},directives:[l.O5,b.BN,l.mk,M,l.sg,Z.xm,J.R],styles:[".card-view__image[_ngcontent-%COMP%]{max-width:400px;margin-left:auto;margin-right:auto;display:block}.card-view__details-field[_ngcontent-%COMP%]{white-space:nowrap;vertical-align:middle}.card-view__details-value[_ngcontent-%COMP%]{word-break:break-word}.card-view__details-icon[_ngcontent-%COMP%]{width:2.5rem;display:inline-flex;justify-content:center}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[v.Bz.forChild(O)],v.Bz]}),t})();var k=a(4466);let B=(()=>{class t{constructor(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,R,b.uH,k.m,Z.IJ]]}),t})()}}]);